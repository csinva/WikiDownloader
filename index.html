<!doctype html>
<html ng-app>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>	
	<script src="test.js"></script>
</head>
<script>
	function WikiCtrl($scope){
		$scope.testFunction = function(){
			console.log('test');
		};
		$scope.getData= function(){
			var x = $.getJSON("http://en.wikipedia.org/w/api.php?action=parse&format=json&callback=?", {page:$scope.name, prop:"text"}, function(data) {useData(data)});
			function useData(data){
				var recievedData = data.parse.text['*'];
				if(recievedData){
					$scope.data=recievedData;
					$scope.$apply();
				}
				//$scope.apply();
				//console.log(data.parse.text['*']);
			}
		}
		$scope.printData = function(){
			console.log($scope.data);
		};
	}
</script> 
<body ng-controller="WikiCtrl">
	<h1> WikiDownloader</h1>
	<span>
		<input type="text" ng-change = "getData()" ng-model="name"></input>
		<button ng-click="getData()">Search</button>
	</span>
	<h2 ng-click = "testFunction()">Searching for: {{name}}</h2>
	<h3 ng-click="printData()">Data Recieved: {{data}}</h3>
</body>
</html>